(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{125:function(e,t,a){},127:function(e,t,a){},128:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(14),i=a.n(c),l=(a(70),a(71),a(11)),o=a(13),s=a(8),u=a(15),d=a(16),p=a(17),m=a(18),h=(a(72),a(30)),f=a.n(h);a(73),a(75);f.a.initializeApp({apiKey:"AIzaSyCmxlYkF7XV_GtHpIs0Ni4RAR22Vk9sKkw",authDomain:"bukumu-project-akhir.firebaseapp.com",databaseURL:"https://bukumu-project-akhir.firebaseio.com",projectId:"bukumu-project-akhir",storageBucket:"bukumu-project-akhir.appspot.com",messagingSenderId:"895405769973",appId:"1:895405769973:web:6b4c35ab290bd5cb6cf1bc",measurementId:"G-PHPRC676E7"});var g=f.a.database(),v=f.a,E=a(12),b=a(131),N=a(130),A=b.a.Header,I=b.a.Content,C=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={title:"",content:"",date:"",textButton:"SIMPAN",articleId:""},e.handleUploadArticles=function(){var t=e.state,a=t.title,n=t.content,r=t.textButton,c=t.articleId,i=e.props,l=i.uploadArticles,o=i.updateArticles,s=JSON.parse(localStorage.getItem("userData")),u={title:a,content:n,date:(new Date).getTime(),userId:s.uid};"SIMPAN"===r?l(u):(u.articleId=c,o(u)),console.log(u)},e.onInputChange=function(t,a){e.setState(Object(s.a)({},a,t.target.value))},e.updateArticles=function(t){console.log(t),e.setState({title:t.data.title,content:t.data.content,textButton:"UPDATE",articleId:t.id})},e.cancelUpdate=function(){e.setState({title:"",content:"",textButton:"SIMPAN"})},e.deleteArticle=function(t,a){t.stopPropagation(),(0,e.props.deleteArticle)({userId:JSON.parse(localStorage.getItem("userData")).uid,articleId:a.id})},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=JSON.parse(localStorage.getItem("userData"));this.props.getArticles(e.uid)}},{key:"render",value:function(){var e=this,t=this.state,a=t.title,c=t.content,i=t.textButton,l=this.props.articles,o=this.updateArticles,u=this.cancelUpdate,d=this.deleteArticle;return console.log("articles: ",l),r.a.createElement(b.a,null,r.a.createElement(A,{className:"header"}),r.a.createElement(b.a,null,r.a.createElement(I,null,r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"input-form"},r.a.createElement("div",{className:"sub-title"},r.a.createElement("h1",null,"Title")),r.a.createElement("input",{placeholder:"Title",className:"input-title",value:a,onChange:function(t){return e.onInputChange(t,"title")}}),r.a.createElement("div",{className:"sub-content"},r.a.createElement("h1",null,"Content")),r.a.createElement("textarea",{placeholder:"Content",className:"input-content",value:c,onChange:function(t){return e.onInputChange(t,"content")}}),r.a.createElement("div",{className:"action-wrapper"},"UPDATE"===i?r.a.createElement("button",Object(s.a)({className:"upload-btn cancel",onClick:this.handleUploadArticles},"onClick",u)," Cancel "):r.a.createElement("div",null),r.a.createElement("button",{className:"upload-btn",onClick:this.handleUploadArticles}," ",i," "))),r.a.createElement("hr",null),r.a.createElement("div",{className:"list-published"},r.a.createElement("h1",null,"List of Your Published Articles : ")),l.length>0?r.a.createElement(n.Fragment,null,l.map((function(e){return r.a.createElement("div",{className:"card-content",key:e.id,onClick:function(){return o(e)}},r.a.createElement("p",{className:"title"}," ",e.data.title," "),r.a.createElement("p",{className:"date"}," ",e.data.date," "),r.a.createElement("p",{className:"content"}," ",e.data.content," "),r.a.createElement("div",{className:"delete-button",onClick:function(t){return d(t,e)}},r.a.createElement(N.a,{type:"primary",shape:"round",danger:!0},"Delete")))}))):null))))}}]),a}(n.Component),w=Object(E.b)((function(e){return{userData:e.user,articles:e.articles}}),(function(e){return{uploadArticles:function(t){return e(function(e){return function(t){g.ref("articles/"+e.userId).push({title:e.title,content:e.content,date:e.date})}}(t))},getArticles:function(t){return e((a=t,function(e){var t=g.ref("articles/"+a);return new Promise((function(a,n){t.on("value",(function(t){console.log("get Data: ",t.val());var n=[];Object.keys(t.val()).map((function(e){n.push({id:e,data:t.val()[e]})})),e({type:"SET_ARTICLES",value:n}),a(t.val())}))}))}));var a},updateArticles:function(t){return e(function(e){return function(t){var a=g.ref("articles/".concat(e.userId,"/").concat(e.articleId));return new Promise((function(t,n){a.set({title:e.title,content:e.content,date:e.date},(function(e){e?n(!1):t(!0)}))}))}}(t))},deleteArticle:function(t){return e(function(e){return function(t){var a=g.ref("articles/".concat(e.userId,"/").concat(e.articleId));return new Promise((function(e,t){a.remove()}))}}(t))}}}))(C),O=a(19),y=a.n(O),k=a(29),j=(a(125),function(e){var t=e.title,a=e.onClick;return e.loading?r.a.createElement("button",{className:"btn disable"}," Loading..."):r.a.createElement("button",{className:"btn",onClick:a},t)}),S=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={email:"",password:""},e.handleChangeText=function(t){e.setState(Object(s.a)({},t.target.id,t.target.value))},e.handleLoginSubmit=Object(k.a)(y.a.mark((function t(){var a,n,r,c,i;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state,n=a.email,r=a.password,c=e.props.history,t.next=4,e.props.loginAPI({email:n,password:r}).catch((function(e){return e}));case 4:(i=t.sent)?(console.log("login success",i),localStorage.setItem("userData",JSON.stringify(i)),e.setState({email:"",password:""}),c.push("/")):console.log("login failed");case 6:case"end":return t.stop()}}),t)}))),e}return Object(d.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"auth-container"},r.a.createElement("div",{className:"auth-card"},r.a.createElement("p",{className:"auth-title"}," Login Page "),r.a.createElement("input",{className:"input",id:"email",placeholder:"Email",type:"text",onChange:this.handleChangeText,value:this.state.email}),r.a.createElement("input",{className:"input",id:"password",placeholder:"Password",type:"password",onChange:this.handleChangeText,value:this.state.password}),r.a.createElement(l.b,{to:"/dashboard"},r.a.createElement(j,{onClick:this.handleLoginSubmit,title:"Login",loading:this.props.isLoading}))))}}]),a}(n.Component),L=Object(E.b)((function(e){return{isLoading:e.isLoading}}),(function(e){return{loginAPI:function(t){return e(function(e){return function(t){return new Promise((function(a,n){t({type:"CHANGE_LOADING",value:!0}),v.auth().signInWithEmailAndPassword(e.email,e.password).then((function(e){var n={email:e.user.email,uid:e.user.uid,emailVerified:e.user.emailVerified,refreshToken:e.user.refreshToken};t({type:"CHANGE_LOADING",value:!1}),t({type:"CHANGE_ISLOGIN",value:!0}),t({type:"CHANGE_USER",value:n}),a(n)})).catch((function(e){var a=e.code,r=e.message;console.log(a,r),t({type:"CHANGE_LOADING",value:!1}),t({type:"CHANGE_ISLOGIN",value:!1}),n(!1)}))}))}}(t))}}}))(S),P=(a(127),function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={email:"",password:""},e.handleChangeText=function(t){e.setState(Object(s.a)({},t.target.id,t.target.value))},e.handleRegisterSubmit=Object(k.a)(y.a.mark((function t(){var a,n,r;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state,n=a.email,r=a.password,t.next=3,e.props.registerAPI({email:n,password:r}).catch((function(e){return e}));case 3:t.sent&&e.setState({email:"",password:""});case 5:case"end":return t.stop()}}),t)}))),e}return Object(d.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"auth-container"},r.a.createElement("div",{className:"auth-card"},r.a.createElement("p",{className:"auth-title"}," Register Page "),r.a.createElement("input",{className:"input",id:"email",placeholder:"Email",type:"text",onChange:this.handleChangeText,value:this.state.email}),r.a.createElement("input",{className:"input",id:"password",placeholder:"Password",type:"password",onChange:this.handleChangeText,values:this.state.password}),r.a.createElement(l.b,{to:"/login"},r.a.createElement(j,{onClick:this.handleRegisterSubmit,title:"Register",loading:this.props.isLoading}))))}}]),a}(n.Component)),G=Object(E.b)((function(e){return{isLoading:e.isLoading}}),(function(e){return{registerAPI:function(t){return e(function(e){return function(t){return new Promise((function(a,n){t({type:"CHANGE_LOADING",value:!0}),v.auth().createUserWithEmailAndPassword(e.email,e.password).then((function(e){console.log("success: ",e),t({type:"CHANGE_LOADING",value:!1}),a(!0)})).catch((function(e){var a=e.code,r=e.message;console.log(a,r),t({type:"CHANGE_LOADING",value:!1}),n(!1)}))}))}}(t))}}}))(P),x=a(23),D=a(63),T=a(20),H={popup:!1,isLogin:!1,isLoading:!1,user:{},articles:[]},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;return"CHANGE_POPUP"===t.type?Object(T.a)({},e,{popup:t.value}):"CHANGE_ISLOGIN"===t.type?Object(T.a)({},e,{isLogin:t.value}):"CHANGE_USER"===t.type?Object(T.a)({},e,{user:t.value}):"CHANGE_LOADING"===t.type?Object(T.a)({},e,{isLoading:t.value}):"SET_ARTICLES"===t.type?Object(T.a)({},e,{articles:t.value}):e},R=Object(x.c)(_,Object(x.a)(D.a));var U=function(){return r.a.createElement(E.a,{store:R},r.a.createElement(l.a,null,r.a.createElement("div",null,r.a.createElement(o.a,{exact:!0,path:"/",component:G}),r.a.createElement(o.a,{path:"/login",component:L}),r.a.createElement(o.a,{path:"/dashboard",component:w}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(l.a,{basename:"/Responsi-Web3"},r.a.createElement(U,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},65:function(e,t,a){e.exports=a(128)},70:function(e,t,a){},71:function(e,t,a){},72:function(e,t,a){}},[[65,1,2]]]);
//# sourceMappingURL=main.53c4d46d.chunk.js.map